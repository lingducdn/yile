(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_list"],{"19bd":function(e,t,o){"use strict";o.r(t),o("4160"),o("b0c0"),o("159b");var a={name:"GoodsList",data:function(){return{breadList:[{name:"商品管理",id:"2"}],form:{page:1,list_rows:10,ban_status:0,goods_category_id:0,name:"",id:null},total:0,tableData:[],dialogTitle2:"商品加价模板",dialogVisible2:!1,rules2:{goods_mark_up_id:[{required:!0,message:"请选择加价模板",trigger:"change"}]},options:[],options1:[],search_goods_category_id:[],multipleSelection:[],ruleForm2:{ids:[],goods_mark_up_id:null},names:[],theme_rgba:localStorage.getItem("theme_rgba")}},watch:{multipleSelection:function(e){var t=this;this.ruleForm2.ids=[],this.names="",0!==e.length&&e.forEach((function(e){t.ruleForm2.ids.push(e.id),t.names=t.names+e.name+"\n"}))}},mounted:function(){this.getData(),this.getOptions1(),this.getOptions()},methods:{getData:function(){var e=this;this.form.id=this.form.id||null,this.$http.goodsPaging(this.form).then((function(t){0===t.code?(e.tableData=t.data.infos,e.total=t.data.count):e.$message({message:t.message,type:"error"})}))},getOptions:function(){var e=this;this.$http.getGoodsCategoryList().then((function(t){0===t.code?(t.data.forEach((function(e){e.value=e.id,e.label=e.name,e.parent_infos.forEach((function(e){e.value=e.id,e.label=e.name})),e.children=e.parent_infos})),e.options=t.data):e.$message({message:t.message,type:"error"})}))},getOptions1:function(){var e=this;this.$http.goodsManageGetGoodsMarkUp().then((function(t){0===t.code?e.options1=t.data:e.$message({message:t.message,type:"error"})}))},pagination:function(e){this.form.page=e.page,this.form.list_rows=e.limit,this.getData(),this.$refs.multipleTable.clearSelection()},isStatus:function(e){switch(e){case 1:return"待上架";case 2:return"销售中";case 3:return"未通过";case 4:return"已下架";case 5:return"已清退";default:return"--"}},handleChange:function(e){1===e.length?this.form.goods_category_id=e[0]:this.form.goods_category_id=e[1],this.$refs.myCascader.getCheckedNodes()[0].hasChildren||this.$refs.myCascader.toggleDropDownVisible()},premium:function(){this.dialogVisible2=!0},handleSelectionChange:function(e){this.multipleSelection=e},resetPopupData2:function(){this.dialogVisible2=!1},submitPopupData2:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$http.setGoodsMarkUpBind(t.ruleForm2).then((function(e){0===e.code?(t.$message({message:"保存成功",type:"success"}),t.dialogVisible2=!1,t.getData()):t.$message({message:e.message,type:"error"})}))}))},show:function(e){var t=this;this.$http.goodsManageBanGoods({id:e}).then((function(e){0===e.code?(t.$message({message:"操作成功",type:"success"}),t.getData()):t.$message({message:e.message,type:"error"})}))}}};o=o("2877"),o=Object(o.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"goods_list"},[o("breadcrumb",{attrs:{"bread-list":e.breadList}}),o("el-card",{staticClass:"box-card"},[o("el-form",{ref:"form",staticClass:"box",attrs:{size:e.terminal,model:e.form,inline:!0}},[o("el-form-item",[o("el-select",{attrs:{placeholder:"商品状态"},model:{value:e.form.ban_status,callback:function(t){e.$set(e.form,"ban_status",t)},expression:"form.ban_status"}},[o("el-option",{attrs:{label:"全部",value:0}}),o("el-option",{attrs:{label:"显示",value:1}}),o("el-option",{attrs:{label:"隐藏",value:2}})],1)],1),o("el-form-item",[o("el-cascader",{attrs:{options:e.options,placeholder:"商品分类",props:{checkStrictly:!0},clearable:""},on:{change:e.handleChange},model:{value:e.search_goods_category_id,callback:function(t){e.search_goods_category_id=t},expression:"search_goods_category_id"}})],1),o("el-form-item",[o("el-input",{attrs:{placeholder:"商品名称",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",[o("el-input",{attrs:{placeholder:"商品编号",clearable:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",e._n(t))},expression:"form.id"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.getData}},[e._v(" 搜索 ")]),o("el-button",{attrs:{type:"primary",disabled:!e.multipleSelection.length},on:{click:e.premium}},[e._v(" 批量加价 ")])],1)],1),[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",stripe:"","tooltip-effect":"light",data:e.tableData,"header-cell-style":{background:e.theme_rgba,color:"#363636"}},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"id",label:"商品编号"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"商品名称"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"goods_category_info",label:"商品分类"}}),o("el-table-column",{attrs:{label:"成本价",align:"center",width:"160","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price.toFixed(6))+" ")]}}])}),o("el-table-column",{attrs:{label:"加价模板名称",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(o){e.ruleForm2.ids=[t.row.id],e.dialogVisible2=!0}}},[e._v(e._s(t.row.goods_mark_up_name))])]}}])}),o("el-table-column",{attrs:{label:"商品状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ban_status?o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.show(t.row.id)}}},[e._v(" 隐藏 ")]):o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.show(t.row.id)}}},[e._v(" 显示 ")])]}}])})],1),10<e.total?o("pagination",{attrs:{total:e.total,page:e.form.page,limit:e.form.list_rows,"page-sizes":[10,20,50,100]},on:{"update:page":function(t){return e.$set(e.form,"page",t)},"update:limit":function(t){return e.$set(e.form,"list_rows",t)},pagination:e.pagination}}):e._e()]],2),o("popup",{attrs:{"dialog-title":e.dialogTitle2,visible:e.dialogVisible2,"popup-width":"mini"===e.terminal?"100%":"550px"},on:{"update:visible":function(t){e.dialogVisible2=t},resetPopupData:function(t){return e.resetPopupData2("ruleForm2")},submitPopupData:function(t){return e.submitPopupData2("ruleForm2")},handleClose:function(t){return e.resetPopupData2("ruleForm2")}}},[o("div",[o("el-alert",{staticStyle:{"margin-bottom":"30px"},attrs:{title:"请仔细检查,再进行操作!",type:"warning","show-icon":"",closable:!1}}),o("el-form",{ref:"ruleForm2",attrs:{model:e.ruleForm2,rules:e.rules2,"label-width":"70px"}},[e.multipleSelection.length?o("el-form-item",{attrs:{label:"已选商品"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},disabled:""},model:{value:e.names,callback:function(t){e.names=t},expression:"names"}})],1):e._e(),o("el-form-item",{attrs:{label:"加价模板",prop:"text"}},[o("el-select",{staticStyle:{width:"100%"},model:{value:e.ruleForm2.goods_mark_up_id,callback:function(t){e.$set(e.ruleForm2,"goods_mark_up_id",t)},expression:"ruleForm2.goods_mark_up_id"}},e._l(e.options1,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)])],1)}),[],!1,null,null,null);t.default=o.exports}}]);