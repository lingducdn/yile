(window.webpackJsonp=window.webpackJsonp||[]).push([["swipe"],{5551:function(t,e,a){},c2cd:function(t,e,a){"use strict";var i=a("5551");a.n(i).a},c5b9:function(t,e,a){"use strict";a.r(e);var i={name:"Swipe",data:function(){return{url:"/api/substation/MySubstation/Upload",form:{page:1,list_rows:50,substation_id:null},ruleForm:{image:"",title:"",url:"",id:null},tableData:[],dialogTitle:"",dialogVisible:!1,total:0,theme_rgba:localStorage.getItem("theme_rgba")}},watch:{dialogVisible:function(t){t||(this.ruleForm={image:"",title:"",url:"",id:null})},"form.substation_id":function(t){t||0===t||(this.form.substation_id=null)}},mounted:function(){this.getBanners()},methods:{getBanners:function(){var t=this;this.$http.bannerManagePaging(this.form).then((function(e){0===e.code?(t.total=e.data.count,t.tableData=e.data.infos):t.$message.error(e.message)}))},del:function(t){var e=this;this.$confirm("此操作将永久删除此条信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.bannerManageDel({id:t}).then((function(t){0===t.code?(e.$message({message:"删除成功",type:"success"}),e.getBanners()):e.$message({message:t.message,type:"error"})}))}))},resetPopupData:function(){this.dialogVisible=!1,this.ruleForm={image:"",title:"",url:"",id:null}},submitPopupData:function(){var t=this;"新增轮播图"===this.dialogTitle?this.$http.bannerManageAdd(this.ruleForm).then((function(e){0===e.code?(t.$message({message:"保存成功",type:"success"}),t.dialogVisible=!1,t.getBanners()):t.$message({message:e.message,type:"error"})})):this.$http.bannerManageEdit(this.ruleForm).then((function(e){0===e.code?(t.$message({message:"修改成功",type:"success"}),t.dialogVisible=!1,t.getBanners()):t.$message({message:e.message,type:"error"})}))},edit:function(t){this.ruleForm.image=t.image,this.ruleForm.title=t.title,this.ruleForm.url=t.url,this.ruleForm.id=t.id,this.dialogTitle="修改轮播图",this.dialogVisible=!0},add:function(){this.dialogVisible=!0,this.dialogTitle="新增轮播图"},handleAvatarSuccess:function(t){0===t.code?this.ruleForm.image=t.data:this.$message.error(t.message)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;t=t.size/1024/1024<1;return e||this.$message.error("上传头像图片只能是 JPG和PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 1MB!"),e&&t},pagination:function(t){this.form.page=t.page,this.form.list_rows=t.limit,this.getData()}}};a("c2cd"),a=a("2877"),a=Object(a.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"swipe"},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{inline:"",size:t.terminal?"mini":"medium"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(" 新增轮播图 ")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"","tooltip-effect":"light",data:t.tableData,"header-cell-style":{background:t.theme_rgba,color:"#363636"}}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"id",label:"编号"}}),a("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover"}},[a("img",{staticStyle:{width:"900px",height:"300px"},attrs:{src:e.row.image,alt:e.row.title}}),a("span",{staticStyle:{color:"#409EFF",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v("查看")])])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"title",label:"标题"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"url",label:"跳转链接"}}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTimer")(e.row.create_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center",fixed:"mini"!==t.terminal&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v(" 修改 ")]),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){return t.del(e.row.id)}}},[t._v(" 删除 ")])]}}])})],1),10<t.total?a("pagination",{attrs:{total:t.total,page:t.form.page,limit:t.form.list_rows,"page-sizes":[10,20,50,100]},on:{"update:page":function(e){return t.$set(t.form,"page",e)},"update:limit":function(e){return t.$set(t.form,"list_rows",e)},pagination:t.pagination}}):t._e(),a("popup",{attrs:{"dialog-title":t.dialogTitle,visible:t.dialogVisible,"popup-width":"mini"===t.terminal?"100%":"680px"},on:{"update:visible":function(e){t.dialogVisible=e},resetPopupData:t.resetPopupData,submitPopupData:t.submitPopupData,handleClose:t.resetPopupData}},[a("div",{class:[t.terminal?"swipe_h5":"swipe_pc"],staticStyle:{width:"600px"}},[a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.url,"show-file-list":!1,"on-success":t.handleAvatarSuccess,name:"file","before-upload":t.beforeAvatarUpload}},[t.ruleForm.image?a("img",{class:[t.terminal?"avatar_h5":"avatar_pc"],staticStyle:{width:"600px",height:"172px"},attrs:{src:t.ruleForm.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticStyle:{"font-size":"12px",color:"#C0C4CC"}},[t._v(" 建议上传尺寸900px * 300px ")])],1),a("div",{class:[t.terminal?"equipment_h5":"equipment_pc"]},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-width":"40px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"560px"},attrs:{placeholder:"请输入标题"},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{staticStyle:{width:"560px"},attrs:{placeholder:"请输入跳转链接"},model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}})],1),a("div",{staticStyle:{"font-size":"14px",color:"#999"}},[t._v(" 注: 跳转链接需要输入完整网址、如: https://www.baidu.com 否则无法正常跳转 ")])],1)],1)])])],1)],1)}),[],!1,null,null,null);e.default=a.exports}}]);