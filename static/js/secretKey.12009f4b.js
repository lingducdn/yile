(window.webpackJsonp=window.webpackJsonp||[]).push([["secretKey"],{2817:function(t,e,a){t.exports=a.p+"static/img/turntableBackground.6eea79f7.png"},"4da7":function(t,e,a){"use strict";a.r(e),a("a15b"),a("ac1f"),a("1276");var i={name:"SecretKey",data:function(){return{dataList:{}}},mounted:function(){this.getKey()},methods:{getKey:function(){var t=this;this.$http.tokenShow().then((function(e){0===e.code&&(e.data.app_secret?(t.dataList=e.data,t.dataList.ip_white_list=e.data.ip_white_list.join("\n")):t.resetKey())}))},resetKey:function(){var t=this;this.dataList.app_secret?this.$confirm("是否重置秘钥?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.tokenReset().then((function(e){0===e.code?(t.$message({message:"成功生成秘钥",type:"success"}),t.getKey()):t.$message.error(e.message)}))})):this.$http.tokenReset().then((function(e){0===e.code?(t.$message({message:"成功生成秘钥",type:"success"}),t.getKey()):t.$message.error(e.message)}))},onCopy:function(){this.$message({message:"复制成功",type:"success"})},submit:function(){var t=this;this.$confirm("是否确定设置ip白名单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.setIpWhiteList({ip_white_list:t.dataList.ip_white_list.split("\n")}).then((function(e){0===e.code?(t.$message({message:"设置成功",type:"success"}),t.getKey()):t.$message.error(e.message)}))}))}}};a=a("2877"),a=Object(a.a)(i,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"secretKey"},[e("div",{staticStyle:{"margin-top":"30px"}},[t._v(" AppID: ")]),e("div",{staticStyle:{margin:"10px 0 20px 0"}},[t._v(" "+t._s(t.dataList.app_id)+" "),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.dataList.app_id,expression:"dataList.app_id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text"}},[t._v(" 复制链接 ")])],1),e("div",[t._v(" 秘钥: ")]),e("div",{staticStyle:{margin:"10px 0 15px 0"}},[t._v(" "+t._s(t.dataList.app_secret)+" "),e("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.dataList.app_secret,expression:"dataList.app_secret",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text"}},[t._v(" 复制链接 ")])],1),e("div",{staticStyle:{"margin-bottom":"20px",width:"360px"}},[e("span",{staticStyle:{color:"#666","font-size":"14px"}},[t._v("白名单:")]),e("el-input",{attrs:{type:"textarea",placeholder:"请输入ip",rows:4,"show-word-limit":""},model:{value:t.dataList.ip_white_list,callback:function(e){t.$set(t.dataList,"ip_white_list",e)},expression:"dataList.ip_white_list"}})],1),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.resetKey}},[t._v(" 重置秘钥 ")]),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v(" 设置白名单 ")])],1)}),[],!1,null,null,null);e.default=a.exports},a855:function(t,e,a){"use strict";a.r(e),a("4160"),a("b0c0"),a("159b");var i={name:"prizeDraw",data:function(){return{width:450,height:450,blocks:[{padding:"50px",imgs:[{src:a("2817"),width:"mini"===this.terminal?"100vw":"450",height:"mini"===this.terminal?"100vw":"450",rotate:!0}]}],buttons:[{radius:"50%",fonts:[{text:"开始",top:"-6px",fontColor:"#fff",fontSize:22,fontWeight:600}],imgs:[{src:a("c538"),width:85,height:100,top:"-50px"}]}],defaultStyle:{lineClamp:1,fontColor:"#913229"},defaultConfig:{accelerationTime:2500,decelerationTime:2500,speed:25},prizes:[],form:{page:1,list_rows:10,status:0,type:0},tableData:[],total:0,theme_rgba:localStorage.getItem("theme_rgba"),lottery:{},lotteryItem:{},dialogVisible:!1}},methods:{getData:function(){var t=this;this.$http.prizeList().then((function(e){0===e.code?t.getPrizes(e.data):t.$message({message:e.message,type:"error"})}))},getData1:function(){var t=this;this.$http.recordPaging(this.form).then((function(e){0===e.code?(t.tableData=e.data.infos,t.total=e.data.count):t.$message({message:e.message,type:"error"})}))},pagination:function(t){this.form.page=t.page,this.form.list_rows=t.limit,this.getData1()},getPrizes:function(t){var e=[];t.length&&t.forEach((function(t,a){e.push({id:t.id,background:a%2==0?"#FFFFFF":"#FFE9EC",fonts:[{text:t.name,top:"10%"}],lineClamp:1,imgs:[{src:t.image,width:40,height:40,top:"50%"}]})})),this.prizes=e},startCallback:function(){var t=this,e=(this.$refs.myLucky.play(),null);this.$http.lottery({isTag:"tag"}).then((function(a){0===a.code?(t.lotteryItem=a.data,t.prizes.forEach((function(t,i){t.id===a.data.id&&(e=i)})),setTimeout((function(){t.$refs.myLucky.stop(e)}),3e3)):t.$message({message:a.message,type:"error"})}))},endCallback:function(){var t=this;0===this.lotteryItem.type?("mini"===this.terminal?this.$dialog.confirm({title:"抱歉,未中奖",message:"是否再来一次?"}):this.$confirm("抱歉、未中奖! 是否再来一次?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"})).then((function(){t.startCallback()})):1===this.lotteryItem.type?("mini"===this.terminal?this.$dialog.confirm({title:"恭喜、抽中".concat(this.lotteryItem.name),message:"奖励已发放! 是否再来一次?"}):this.$confirm("恭喜、抽中".concat(this.lotteryItem.name,", 奖励已发放! 是否再来一次?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"})).then((function(){t.startCallback()})):2===this.lotteryItem.type&&(this.dialogVisible=!0),this.$parent.getDataShow()},onClickLeft:function(){this.$router.go(-1)},aprize:function(t){this.$router.push({path:"/details",query:{id:t.lottery_prize_goods_id,lottery_record_id:t.id}})},handleClick:function(){this.getData1()},handleClose:function(t){t()}},mounted:function(){this.getData(),this.getData1();var t=JSON.parse(localStorage.getItem("sysConfig"));this.lottery=t.lottery}},s=a("2877");s=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#FFF"}},["mini"===t.terminal?a("van-nav-bar",{attrs:{title:"转盘抽奖","left-arrow":""},on:{"click-left":t.onClickLeft}}):t._e(),[a("el-tabs",{attrs:{type:"mini"===t.terminal?"border-card":""},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"转盘抽奖"}},[a("van-notice-bar",{attrs:{"left-icon":"volume",scrollable:!0}},[t._v(" "+t._s(t.lottery.notice||"未设置抽奖公告")+" ")]),a("div",{staticStyle:{"text-align":"center",margin:"20px 0",color:"red","font-size":"16px",transform:"translate(-25px)"}},[t._v(" 抽奖价格: "+t._s(t.lottery.price)+"元/ 次 ")]),a("div",{staticStyle:{"padding-bottom":"60px","padding-left":"50%",transform:"translate(-50%)"},style:{width:"mini"===t.terminal?"100vw":t.width+"px"}},[a("LuckyWheel",{ref:"myLucky",attrs:{width:"mini"===t.terminal?"100vw":t.width+"px",height:"mini"===t.terminal?"100vw":t.height+"px",prizes:t.prizes,blocks:t.blocks,buttons:t.buttons,"default-config":t.defaultConfig,"default-style":t.defaultStyle},on:{start:t.startCallback,end:t.endCallback}})],1)],1),a("el-tab-pane",{attrs:{label:"中奖记录"}},[a("el-form",{ref:"form",attrs:{model:t.form,inline:"",size:t.terminal?"mini":"small"}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"奖品状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",t._n(e))},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"已兑换",value:1}}),a("el-option",{attrs:{label:"待兑换",value:2}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"奖品类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",t._n(e))},expression:"form.type"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"余额奖励",value:1}}),a("el-option",{attrs:{label:"商品奖励",value:2}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getData1}},[t._v("搜索")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"","tooltip-effect":"light",data:t.tableData,"header-cell-style":{background:t.theme_rgba,color:"#363636"}}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"id",label:"编号"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"lottery_prize_name",label:"奖品名称"}}),a("el-table-column",{attrs:{label:"奖品类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.lottery_prize_type?a("span",[t._v("余额奖励")]):t._e(),2===e.row.lottery_prize_type?a("span",[t._v("商品奖励")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"是否兑换",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("span",[t._v("已兑换")]):t._e(),2===e.row.status?a("span",[t._v("待兑换")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"中奖时间",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTimer")(e.row.create_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"兑奖时间",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.exchange_time?a("span",[t._v(t._s(t._f("formatTimer")(e.row.exchange_time)))]):a("span",[t._v("-")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"120",fixed:"mini"!==t.terminal&&"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[2===e.row.status?a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.aprize(e.row)}}},[t._v("兑换奖励")])],1):a("span",[t._v(" - ")])])]}}])})],1),10<t.total?a("pagination",{attrs:{total:t.total,page:t.form.page,limit:t.form.list_rows,"page-sizes":[10,20,50,100]},on:{"update:page":function(e){return t.$set(t.form,"page",e)},"update:limit":function(e){return t.$set(t.form,"list_rows",e)},pagination:t.pagination}}):t._e()],1)],1)],a("el-dialog",{attrs:{title:"兑换奖品",visible:t.dialogVisible,width:"mini"===t.terminal?"90%":"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s("恭喜、抽中"+this.lotteryItem.name+"!"))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.startCallback(),t.dialogVisible=!1}}},[t._v("再来一次")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push({path:"/details",query:{id:t.lotteryItem.goods_id,lottery_record_id:t.lotteryItem.record_id}})}}},[t._v("兑换奖励")])],1)])],2)}),[],!1,null,null,null);e.default=s.exports},c538:function(t,e,a){t.exports=a.p+"static/img/buttonImg.fd3cae66.png"}}]);