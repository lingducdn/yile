(window.webpackJsonp=window.webpackJsonp||[]).push([["workbench"],{"1b93":function(t,e,a){"use strict";a.r(e),a("99af"),a("4160"),a("b65f"),a("159b");var s={name:"Workbench",data:function(){return{myport:window.location.port,main_domain:"",main_domain1:"",activeName:"a",dialogTitle:"域名管理",dialogVisible:!1,domain_list:[],dataList:{},dataList1:{},form:{start_time:new Date((new Date).toLocaleDateString()).getTime(),end_time:new Date((new Date).toLocaleDateString()).getTime()+864e5},ruleForm1:{substation_id:null,domain:""},ruleForm2:{id:null,domain:""},rules1:{domain:[{required:!0,message:"请填写域名",trigger:"blur"}]},rules2:{domain:[{required:!0,message:"请填写修改域名",trigger:"blur"}],id:[{required:!0,message:"请选择需要修改域名",trigger:"change"}]},rules3:{id:[{required:!0,message:"请选择删除域名",trigger:"change"}]},ruleForm3:{id:null},tableData:{},breadList:[{name:"我的工作台",id:"1"}],radio1:"今天",domainPrice:0,options:[],options2:[],tab:"ruleForm1",system:null,options1:{}}},watch:{radio1:function(t){"今天"===t?(this.form.start_time=new Date((new Date).toLocaleDateString()).getTime(),this.form.end_time=new Date((new Date).toLocaleDateString()).getTime()+864e5,this.getData()):"昨天"===t?(this.form.start_time=new Date((new Date).toLocaleDateString()).getTime()-864e5,this.form.end_time=new Date((new Date).toLocaleDateString()).getTime(),this.getData()):"一周"===t?(this.form.start_time=new Date((new Date).toLocaleDateString()).getTime()-6048e5,this.form.end_time=new Date((new Date).toLocaleDateString()).getTime()+864e5,this.getData()):"一月"===t?(this.form.start_time=new Date((new Date).toLocaleDateString()).getTime()-2592e6,this.form.end_time=new Date((new Date).toLocaleDateString()).getTime()+864e5,this.getData()):"三月"===t&&(this.form.start_time=new Date((new Date).toLocaleDateString()).getTime()-7776e6,this.form.end_time=new Date((new Date).toLocaleDateString()).getTime()+864e5,this.getData())},dialogVisible:function(t){t||this.getData1()},activeName:function(t){"a"===t?this.tab="ruleForm1":"b"===t?this.tab="ruleForm2":"c"===t&&(this.tab="ruleForm3")}},mounted:function(){var t,e=this,a=(this.getData(),this.getData1(),this.getOptions(),/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?this.system="h5":this.system="pc",JSON.parse(localStorage.getItem("sysConfig")));for(t in a.substation_level)a.substation_level[t].index=t;this.dataList1=a.substation_level,this.domainPrice=a.substation_domain_price,this.$http.substationDomainList().then((function(t){if(0===t.code)for(var a in e.options2=[],t.data)e.options2.push({value:a,label:t.data[a]});else e.$message.error(t.message)}))},methods:{domainShow:function(){var t=this;this.dialogVisible=!0,this.$http.substationDomainPaging().then((function(e){0===e.code?t.options=e.data:t.$message.error(e.message)}))},getData:function(){var t=this;this.form.start_time=Math.trunc(this.form.start_time/1e3),this.form.end_time=Math.trunc(this.form.end_time/1e3),this.$http.benchGet(this.form).then((function(e){0===e.code?t.tableData=e.data:t.$message({message:e.message,type:"error"})}))},getData1:function(){var t=this;this.$http.getSubstation().then((function(e){0===e.code?(e.data.domain_list&&0!==e.data.domain_list.length?e.data.domain_list.forEach((function(e){t.domain_list.push({domain:e.domain,disabled:!0})})):(t.domain_list=[],e.data.domain_list=[]),t.dataList=e.data):t.$message({message:e.message,type:"error"})}))},isType:function(t){return"1"===t?"已付款":"2"===t?"待处理":"3"===t?"处理中":"4"===t?"补单中":"5"===t?"退单中":"6"===t?"已完成":"7"===t?"已退单":"8"===t?"已退款":"9"===t?"异常处理":"10"===t?"下单失败":void 0},isType2:function(t){return this.options1.customer_level[t].as},isType3:function(t){return this.options1.substation_level[t].as},getOptions:function(){var t=JSON.parse(localStorage.getItem("sysConfig"));this.options1.substation_level=t.substation_level,this.options1.customer_level=t.customer_level},add:function(){this.domain_list.push({domain:"",disabled:!1})},resetPopupData:function(){this.dialogVisible=!1},submitPopupData:function(t){var e=this;this.$refs[t].validate((function(a){if(a)if("a"===e.activeName){if(!e.main_domain)return e.$message({message:"请选择一级域名",type:"error"}),!1;var s="".concat(e.ruleForm1.domain,".").concat(e.main_domain);e.$http.substationDomainAdd({substation_id:e.ruleForm1.substation_id,domain:s}).then((function(a){0===a.code?(e.$message({message:"添加成功",type:"success"}),e.getData(),e.$refs[t].resetFields(),e.dialogVisible=!1):e.$message({message:a.message,type:"error"})}))}else if("b"===e.activeName){if(!e.main_domain1)return e.$message({message:"请选择一级域名",type:"error"}),!1;s="".concat(e.ruleForm2.domain,".").concat(e.main_domain1),e.$http.substationDomainEdit({id:e.ruleForm2.id,domain:s}).then((function(a){0===a.code?(e.$message({message:"修改成功",type:"success"}),e.getData(),e.$refs[t].resetFields(),e.dialogVisible=!1):e.$message({message:a.message,type:"error"})}))}else"c"===e.activeName&&e.$http.substationDomainDel(e.ruleForm3).then((function(a){0===a.code?(e.$message({message:"删除成功",type:"success"}),e.getData(),e.$refs[t].resetFields(),e.dialogVisible=!1):e.$message({message:a.message,type:"error"})}))}))}}};a("4779"),a=a("2877"),a=Object(a.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workbench",style:{minWidth:"pc"===t.system?"1600px":"100%"}},[a("breadcrumb",{attrs:{"bread-list":t.breadList}}),a("div",{staticStyle:{margin:"15px 0"}},[a("el-radio-group",{attrs:{size:t.terminal},model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[a("el-radio-button",{attrs:{label:"今天"}}),a("el-radio-button",{attrs:{label:"昨天"}}),a("el-radio-button",{attrs:{label:"一周"}}),a("el-radio-button",{attrs:{label:"一月"}}),a("el-radio-button",{attrs:{label:"三月"}})],1)],1),a("div",{staticStyle:{"background-color":"#454E55","border-radius":"6px",padding:"15px 10px 20px 10px"}},[a("div",{staticClass:"box",staticStyle:{padding:"20px"}},[a("el-row",[a("el-col",{attrs:{span:"pc"===t.system?6:24}},[a("div",[a("span",{staticClass:"title"},[t._v("会员编号:")]),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.customer_id))])]),a("div",[a("span",{staticClass:"title"},[t._v("站定名称:")]),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.name))])]),a("div",[a("span",{staticClass:"title"},[t._v("站点标题:")]),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.title))])]),a("div",[a("span",{staticClass:"title"},[t._v("站点版本:")]),a("span",{staticClass:"content"},[t.dataList.version?t._e():a("span",[t._v("未开通")]),1===t.dataList.version?a("span",[t._v(t._s(t.dataList1[1].as))]):t._e(),2===t.dataList.version?a("span",[t._v(t._s(t.dataList1[2].as))]):t._e(),3===t.dataList.version?a("span",[t._v(t._s(t.dataList1[3].as))]):t._e()])])]),a("el-col",{attrs:{span:"pc"===t.system?7:24}},[a("div",[a("span",{staticClass:"title"},[t._v("客服QQ: ")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.qq||"--"))])]),a("div",[a("span",{staticClass:"title"},[t._v("开通时间:")]),a("span",{staticClass:"content"},[t._v(t._s(t._f("formatTimer")(t.dataList.create_time)))])]),a("div",[a("span",{staticClass:"title"},[t._v("到期时间:")]),a("span",{staticClass:"content"},[t._v(t._s(t._f("formatTimer")(t.dataList.expire_time)))])]),a("div",[a("span",{staticClass:"title"},[t._v("站点描述:")]),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.description||"--"))])])]),a("el-col",{attrs:{span:"pc"===t.system?11:24}},[a("el-row",[a("el-col",{attrs:{span:"pc"===t.system?3:6}},[a("span",{staticClass:"title",staticStyle:{"margin-right":"10px"}},[t._v("域名管理:")])]),a("el-col",{attrs:{span:"pc"===t.system?21:18}},[a("el-tag",{staticStyle:{cursor:"pointer"},attrs:{size:"mini"},on:{click:t.domainShow}},[t._v(" 绑定域名 ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:"pc"===t.system?3:6}},[a("span",{staticClass:"title",staticStyle:{"margin-right":"10px"}},[t._v("已绑域名:")])]),a("el-col",{attrs:{span:"pc"===t.system?21:18}},t._l(t.dataList.domain_list,(function(e,s){return a("div",{key:s,staticStyle:{color:"#5388ff"}},[t._v(" "+t._s(e.domain)+" ")])})),0)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:"pc"===t.system?6:24}},[a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[t._v(" 销售利润 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"box1 bgColor6"},[a("div",[a("i",{staticClass:"el-icon-s-management iconSize"})]),a("div",[a("div",[t._v(" 销售总额 ")]),a("div",{staticClass:"num"},[t._v(" "+t._s(t.tableData.sales.total.toFixed(2))+" ")])])])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"box1 bgColor6"},[a("div",[a("i",{staticClass:"el-icon-s-management iconSize"})]),a("div",[a("div",[t._v(" 预计利润 ")]),a("div",{staticClass:"num"},[t._v(" "+t._s(t.tableData.sales.profit.toFixed(2))+" ")])])])])],1)],1)]),a("el-col",{attrs:{span:"pc"===t.system?8:24}},[a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[t._v(" 分站统计 ")]),a("el-row",t._l(t.tableData.substation_level_count,(function(e,s){return a("el-col",{key:s,attrs:{span:8}},[a("div",{staticClass:"box1 bgColor2",staticStyle:{padding:"20px 15px"}},["pc"===t.system?a("div",[a("i",{staticClass:"el-icon-menu iconSize"})]):t._e(),a("div",[a("div",[t._v(" "+t._s(t.isType3(s))+" ")]),a("div",{staticClass:"num"},[t._v(" "+t._s(e)+" ")])])])])})),1)],1)]),a("el-col",{attrs:{span:"pc"===t.system?10:24}},[a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[t._v(" 会员统计 ")]),a("el-row",t._l(t.tableData.customer_count,(function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("div",{staticClass:"box1 bgColor3"},["pc"===t.system?a("div",[a("i",{staticClass:"el-icon-user-solid iconSize"})]):t._e(),a("div",[a("div",[t._v(" "+t._s(t.isType2(s))+" ")]),a("div",{staticClass:"num"},[t._v(" "+t._s(e)+" ")])])])])})),1)],1)]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[t._v(" 订单统计 ")]),a("div",{staticStyle:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},t._l(t.tableData.order_status_count,(function(e,s){return a("div",{key:s,staticStyle:{flex:"1"}},[a("div",{staticClass:"box1 bgColor5"},["pc"===t.system?a("div",[a("i",{staticClass:"el-icon-s-comment iconSize"})]):t._e(),a("div",[a("div",[t._v(" "+t._s(t.isType(s))+" ")]),a("div",{staticClass:"num"},[t._v(" "+t._s(e)+" ")])])])])})),0)])])],1)],1),a("popup",{attrs:{"dialog-title":t.dialogTitle,visible:t.dialogVisible,"popup-width":"mini"===t.terminal?"100%":"550px"},on:{"update:visible":function(e){t.dialogVisible=e},resetPopupData:function(e){return t.resetPopupData()},submitPopupData:function(e){return t.submitPopupData(t.tab)},handleClose:function(e){return t.resetPopupData()}}},[a("div",[a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"请仔细检查,再进行操作!",type:"warning","show-icon":"",closable:!1}}),a("div",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"添加域名",name:"a"}},[a("el-form",{ref:"ruleForm1",staticStyle:{padding:"10px 0"},attrs:{model:t.ruleForm1,rules:t.rules1,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"站点域名",prop:"domain"}},[a("el-input",{attrs:{placeholder:"请输入域名",onkeyup:"value=value.replace(/[\\u4e00-\\u9fa5]/ig,'')"},model:{value:t.ruleForm1.domain,callback:function(e){t.$set(t.ruleForm1,"domain",e)},expression:"ruleForm1.domain"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"append"},slot:"append",model:{value:t.main_domain,callback:function(e){t.main_domain=e},expression:"main_domain"}},t._l(t.options2,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})})),1)],1)],1),a("span",[t._v("新增绑定域名单价: "),a("span",{staticStyle:{color:"red"}},[t._v("¥"+t._s(t.domainPrice)+"元")])]),t._v("/个 ")],1)],1),a("el-tab-pane",{attrs:{label:"修改域名",name:"b"}},[a("el-form",{ref:"ruleForm2",staticStyle:{padding:"10px 0"},attrs:{model:t.ruleForm2,rules:t.rules2,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择域名",prop:"id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择处理结果"},model:{value:t.ruleForm2.id,callback:function(e){t.$set(t.ruleForm2,"id",t._n(e))},expression:"ruleForm2.id"}},t._l(t.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.domain,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"修改域名",prop:"domain"}},[a("el-input",{attrs:{placeholder:"请输入域名","on-key-up":"value=value.replace(/[\\W]/g,'')"},model:{value:t.ruleForm2.domain,callback:function(e){t.$set(t.ruleForm2,"domain",e)},expression:"ruleForm2.domain"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"append"},slot:"append",model:{value:t.main_domain1,callback:function(e){t.main_domain1=e},expression:"main_domain1"}},t._l(t.options2,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})})),1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"删除域名",name:"c"}},[a("el-form",{ref:"ruleForm3",staticStyle:{padding:"10px 0"},attrs:{model:t.ruleForm3,rules:t.rules3,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择域名",prop:"id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择处理结果"},model:{value:t.ruleForm3.id,callback:function(e){t.$set(t.ruleForm3,"id",t._n(e))},expression:"ruleForm3.id"}},t._l(t.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.domain,value:t.id}})})),1)],1)],1)],1)],1)],1)],1)])],1)}),[],!1,null,"be617a64",null);e.default=a.exports},"1f8a":function(t,e,a){},4779:function(t,e,a){"use strict";var s=a("1f8a");a.n(s).a},b65f:function(t,e,a){"use strict";a("23e7")({target:"Math",stat:!0},{trunc:a("b42e")})}}]);