(window.webpackJsonp=window.webpackJsonp||[]).push([["details"],{"313e":function(t,e,a){"use strict";function s(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}a.r(e),a("99af"),a("4160"),a("b0c0"),a("b680"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("1276"),a("159b");var o={name:"Details",data:function(){return{dialogVisible1:!1,cardCodeIds:[],activeStatus:"single",activeName:"first",lcnum:1,combination:0,textarea:"",dialogTitle:"下单参数",dialogVisible:!1,buy_params:[],textareaList:"",is_collect:!0,imgurl:"",imagesList:[],dataList:{},rules:{buy_number:[{required:!0,message:" ",trigger:"change"}],buy_params:[{required:!0,message:" ",trigger:"change"}]},ruleForm:{id:parseInt(this.$route.query.id),buy_number:1,buy_params:{}},ruleForm1:{id:parseInt(this.$route.query.id),buys:[{buy_number:1,buy_params:{}}]},buttonLding:!1,total:0,tableData:[],loading:!0,form:{page:1,list_rows:10,status:0,id:null,goods_id:parseInt(this.$route.query.id),goods_name:"",buy_params:""},form1:{page:1,uin:""},card_code_ids:[],qqData:[],cardShow:!1,theme_color:localStorage.getItem("theme_color"),theme_name:localStorage.getItem("theme_name"),theme_rgba:localStorage.getItem("theme_rgba"),lottery_record_id:parseInt(this.$route.query.lottery_record_id)?parseInt(this.$route.query.lottery_record_id):null,isdisabled:!1}},mounted:function(){this.getData()},methods:(s(o={pageMin:function(t,e){1<this.form1.page?(this.form1.page--,this.getqqData(t,e)):this.$message({message:"已经是第一页了",type:"error"})},getqqData:function(t,e){var a=this;t?(this.form1.uin=t,this.$http.getShuo(this.form1).then((function(t){0===t.code?(e.value=t.data[0].id,a.qqData=t.data):a.$message({message:t.message,type:"error"})}))):this.$message({message:"请填写qq号",type:"error"})},operationScoreChange:function(){this.ruleForm.buy_number=this.$refs.operationScore.displayValue,this.$refs.form.validateField("operationScore")},lcchange:function(){var t=1;this.buy_params.forEach((function(e){!e.value||7!==e.type&&8!==e.type||(t*=parseInt(e.value))})),this.lcnum=t},submitPopupData:function(){var t=this;this.dialogVisible=!1,this.buttonLding=!0,this.$confirm("是否确定购买此商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.homeBuyIn(t.ruleForm1).then((function(e){0===e.code?(e.data&&e.data.card_code_ids&&e.data.card_code_ids.length?(t.card_code_ids=e.data.card_code_ids,t.cardShow=!0):t.$confirm("购买成功！现在去查看订单？","提示",{confirmButtonText:"查看订单",cancelButtonText:"继续购买",type:"success"}).then((function(){t.$router.push({path:"/order"})})),t.buttonLding=!1,t.getData()):(t.$message({message:e.message,type:"error"}),t.buttonLding=!1)}))}))},resetPopupData:function(){this.dialogVisible=!1},onCopy:function(){this.$message({message:"复制成功",type:"success"})},bulkOrder:function(){var t,e,a,s,o,i,r=this;this.textareaList.length?(this.buy_params.length&&(t="",this.buy_params.forEach((function(e,a){0===a?t+=e.name:t=t+"----"+e.name})),this.textarea="下单数量----"+t+"\n"+this.textareaList),this.ruleForm1.buys=[],e=[],e=this.textareaList.split("\n"),a=[],e.forEach((function(t){4<t.length&&a.push(t.split("----"))})),s=["buy_number"],this.buy_params.forEach((function(t){s.push(t.key)})),o=[],a.forEach((function(t){var e={};s.forEach((function(a,s){e[a]=t[s]})),o.push(e)})),i=0,o.forEach((function(t){var e,a={buy_number:1,buy_params:{}};for(e in t)"buy_number"===e?(a.buy_number=parseInt(t[e]),i+=a.buy_number):a.buy_params[e]=t[e];r.ruleForm1.buys.push(a)})),this.combination=(this.dataList.price*i).toFixed(6),this.dialogVisible=!0):this.$message({message:"请输入下单参数",type:"error"})},changeImage:function(t){this.isIndex=t,this.imgurl=this.imagesList[t]},pre:function(){0<this.isIndex&&this.changeImage(this.isIndex-1)},next:function(){this.isIndex<this.imagesList.length-1&&this.changeImage(this.isIndex+1)},gerrecordRecord:function(){var t=this;this.$http.recordRecord({id:this.lottery_record_id}).then((function(e){0===e.code?e.data.lottery_prize_goods_buy_number&&(t.ruleForm.buy_number=e.data.lottery_prize_goods_buy_number,t.isdisabled=!0):t.$message({message:e.message,type:"error"})}))},getData:function(){var t=this;this.$http.getGoods({id:parseInt(this.$route.query.id)}).then((function(e){0===e.code?(t.is_collect=e.data.is_collect,t.imagesList=[],0===e.data.image_urls.length?(t.imgurl=a("56b5")("./".concat(t.theme_name,"/default.png")),t.imagesList.push(a("56b5")("./".concat(t.theme_name,"/default.png")))):(t.imgurl=e.data.image_urls[0],t.imagesList=e.data.image_urls)):t.$message({message:e.message,type:"error"}),t.dataList=e.data,t.ruleForm.buy_number=e.data.buy_min_limit,t.buy_params=e.data.buy_params,t.$route.query.lottery_record_id&&t.gerrecordRecord()})),this.form.id=this.form.id||null,this.$http.orderPaging(this.form).then((function(e){0===e.code?(t.total=e.data.count,t.tableData=e.data.infos,t.loading=!1):t.$message({message:e.message,type:"error"})}))},pagination:function(t){this.form.page=t.page,this.form.list_rows=t.limit,this.getData()},isStatus:function(t){return 1===t?"已付款":2===t?"待处理":3===t?"处理中":4===t?"补单中":5===t?"退单中":6===t?"已完成":7===t?"已退单":8===t?"已退款":9===t?"有异常":void 0},isReturn:function(t){var e=this;this.$confirm("是否确认退单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.statusHandle({status:5,id:t}).then((function(t){0===t.code?(e.$message({message:"申请退单成功，请耐心等待系统处理。",type:"success"}),e.getData()):e.$message.error(t.message)}))}))}},"onCopy",(function(){this.$message({message:"复制成功",type:"success"})})),s(o,"collection",(function(t){var e=this;t?(this.buttonLding=!0,this.$http.collectDel({goods_id:parseInt(this.$route.query.id)}).then((function(t){0===t.code?(e.$message({message:"取消收藏成功",type:"success"}),e.buttonLding=!1,e.getData()):(e.$message.error(t.message),e.buttonLding=!1)}))):(this.buttonLding=!0,this.$http.collectAdd({goods_id:parseInt(this.$route.query.id)}).then((function(t){0===t.code?(e.$message({message:"收藏成功",type:"success"}),e.buttonLding=!1,e.getData()):(e.$message({message:t.message,type:"error"}),e.buttonLding=!1)})))})),s(o,"pay",(function(t){var e=this;if(1===this.dataList.buy_rate||this.ruleForm.buy_number%this.dataList.buy_rate==0)return 1===this.dataList.is_close?(this.$message({message:"该商品已停止销售, 无法购买!!!",type:"error"}),!1):void this.$refs[t].validate((function(t){t&&(e.dataList.buy_params&&0!==e.dataList.buy_params.length&&e.dataList.buy_params.forEach((function(t){if(0!==t.verify.min)if(7===t.type||8===t.type){if(t.value<t.verify.min)throw e.$message({message:"".concat(t.name,"必须大于或等于").concat(t.verify.min),type:"error"}),new Error("EndIterative")}else if(t.value.length<t.verify.min)throw e.$message({message:"".concat(t.name,"长度必须大于或等于").concat(t.verify.min),type:"error"}),new Error("EndIterative");if(0!==t.verify.max)if(7===t.type||8===t.type){if(t.value>t.verify.max)throw e.$message({message:"".concat(t.name,"必须小于或等于").concat(t.verify.max),type:"error"}),new Error("EndIterative")}else if(t.value.length>t.verify.max)throw e.$message({message:"".concat(t.name,"长度必须小于或等于").concat(t.verify.max),type:"error"}),new Error("EndIterative");9===t.type&&""===t.value&&(t.value=!1);var a=t.key;if(e.ruleForm.buy_params[a]=t.value.toString(),!e.ruleForm.buy_params[a])throw e.$message({message:"参数不能为空",type:"error"}),new Error("EndIterative");if(a=new RegExp("[\\u4E00-\\u9FFF]+","g"),61===t.type&&a.test(t.value))throw e.$message({message:"链接中不能含有文字",type:"error"}),new Error("EndIterative")})),e.$confirm("是否确定".concat(e.lottery_record_id?"兑换":"购买","此商品?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.buttonLding=!0;var t=e.ruleForm;t={id:t.id,buy_number:t.buy_number,buy_params:t.buy_params};e.lottery_record_id&&(t.lottery_record_id=e.lottery_record_id),e.$http.buy(t).then((function(t){0===t.code?(t.data.card_code_ids&&t.data.card_code_ids.length?(e.card_code_ids=t.data.card_code_ids,e.cardShow=!0):e.$confirm("购买成功！现在去查看订单？","提示",{confirmButtonText:"查看订单",cancelButtonText:"继续购买",type:"success"}).then((function(){e.$router.push({path:"/order"})})),e.buttonLding=!1,e.getData()):(e.$message({message:t.message,type:"error"}),e.buttonLding=!1)}))})))}));this.$message({message:"购买数量必须是".concat(this.dataList.buy_rate,"的整数倍"),type:"error"})})),s(o,"extract",(function(t){var e=this,a=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;t.value.match(a)||this.$message({message:"未检测到链接",type:"error"}),61===t.type?t.value=t.value.match(a).toString():62===t.type&&this.$http.urlParse({url:t.value.match(a).toString()}).then((function(a){0===a.code?t.value=a.data:e.$message({message:a.message,type:"error"})}))})),s(o,"inputValue",(function(t){var e=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;if(!t.value.match(e))return!1;t.value=t.value.match(e).toString()})),s(o,"paramsFiltra",(function(t){var e=[];return t.forEach((function(t){!1===t.is_default&&e.push(t)})),e[0].value})),o)},i=(a("ddd6"),a("2877"));i=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details11"},[a("headers"),t.dataList?a("div",[a("el-card",[a("div",{staticClass:"box"},[a("el-row",[a("el-col",{attrs:{span:9}},[a("div",{staticStyle:{"padding-top":"10px","padding-left":"30px"}},[a("div",{staticStyle:{width:"420px",height:"420px"}},[a("img-zoom",{attrs:{width:420,height:420,"min-i-m-gsrc":t.imgurl,scale:3}})],1),a("div",{staticClass:"list"},[a("ul",[a("i",{staticClass:"el-icon-arrow-left",staticStyle:{"line-height":"56px",position:"absolute",left:"0",cursor:"pointer","background-color":"#F7F7F7",color:"#D2D2D2","font-weight":"600"},on:{click:t.pre}}),t._l(t.imagesList,(function(e,s){return a("li",{key:s,on:{click:function(e){return t.changeImage(s)}}},[a("img",{staticStyle:{"line-height":"56px",cursor:"pointer"},attrs:{src:e,width:"56",height:"56"}})])})),a("i",{staticClass:"el-icon-arrow-right",staticStyle:{"line-height":"56px",position:"absolute",right:"0",cursor:"pointer","background-color":"#F7F7F7",color:"#D2D2D2","font-weight":"600"},on:{click:t.next}})],2)])])]),a("el-col",{attrs:{span:15}},[a("div",{staticStyle:{"padding-top":"10px","padding-left":"20px"}},[a("div",[a("div",{staticStyle:{"font-size":"22px","font-family":"PingFangHK-Medium, PingFangHK","font-weight":"500",color:"#252B3A","line-height":"33px"}},[t._v(" "+t._s(t.dataList.name)+" "),t.lottery_record_id?a("span",{staticStyle:{color:"#ee0a24","font-weight":"600","line-height":"24px"}},[t._v("(抽奖兑换)")]):t._e()]),a("div",{staticStyle:{"margin-top":"15px"}},[a("div",[a("span",{staticClass:"title"},[t._v("商品单价")]),a("span",{staticStyle:{color:"#F8393E"}},[1<t.dataList.price_show_num?a("span",{staticStyle:{"font-size":"24px","ont-family":"DINAlternate-Bold, DINAlternate","font-weight":"bold"}},[t._v(" "+t._s((t.dataList.price*t.dataList.price_show_num).toFixed(6))+"元 "),a("span",{staticStyle:{"font-size":"14px",color:"#F8393E"}},[t._v(" / "+t._s(t.dataList.price_show_num+t.dataList.unit))])]):a("span",{staticStyle:{"font-size":"24px","ont-family":"DINAlternate-Bold, DINAlternate","font-weight":"bold"}},[t._v(" "+t._s(t.dataList.price.toFixed(6))+" "),a("span",{staticStyle:{"font-size":"15px",color:"#666"}},[t._v(t._s(t.dataList.unit?"/"+t.dataList.price_show_num+t.dataList.unit:""))])]),t.dataList.is_close_price?a("el-tag",{staticStyle:{transform:"translate(10px, -4px)"},attrs:{type:"danger",effect:"dark",size:"mini"}},[t._v("密价")]):t._e()],1)]),a("div",[a("span",{staticClass:"title"},[t._v("商品编号")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.id))])]),a("div",[a("span",{staticClass:"title"},[t._v("商品库存")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(-1===t.dataList.stock?"无限制":t.dataList.stock))])]),a("div",[a("span",{staticClass:"title"},[t._v("是否退单")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.refund_status&&t.dataList.refund_status.length?"允许退单":"不允许退单"))])]),a("div",[a("span",{staticClass:"title"},[t._v("最小下单")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.dataList.buy_min_limit))])]),a("div",[a("span",{staticClass:"title"},[t._v("最大下单")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(0===t.dataList.buy_max_limit?"无限制":t.dataList.buy_max_limit))])]),1===t.dataList.is_close?a("div",[a("span",{staticStyle:{color:"#ee0a24","font-weight":"600","line-height":"24px"}},[t._v("注: 该商品已停止销售!")])]):t._e()])]),1===t.dataList.is_batch?a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},model:{value:t.activeStatus,callback:function(e){t.activeStatus=e},expression:"activeStatus"}},[a("el-tab-pane",{attrs:{label:"单独下单",name:"single"}}),a("el-tab-pane",{attrs:{label:"批量下单",name:"multiple"}})],1)],1):t._e(),"single"===t.activeStatus?a("div",[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[1!==t.dataList.buy_min_limit||1!==t.dataList.buy_max_limit?a("el-form-item",{attrs:{label:"购买数量",prop:"buy_number"}},[a("el-input-number",{ref:"operationScore",staticStyle:{width:"160px"},attrs:{max:0===t.dataList.buy_max_limit?9999999:t.dataList.buy_max_limit,"step-strictly":"",size:"small",disabled:t.isdisabled},nativeOn:{input:function(e){return t.operationScoreChange.apply(null,arguments)}},model:{value:t.ruleForm.buy_number,callback:function(e){t.$set(t.ruleForm,"buy_number",t._n(e))},expression:"ruleForm.buy_number"}}),t.dataList.buy_rate&&1!==t.dataList.buy_rate?a("div",{staticStyle:{"font-size":"14px","padding-left":"10px",color:"#F8393E",transform:"translate(0, -10px)"}},[t._v(" 注：购买数量必须是"+t._s(t.dataList.buy_rate)+"的整数倍 ")]):t._e()],1):t._e(),t._l(t.dataList.buy_params,(function(e){return a("el-form-item",{key:e.key,staticStyle:{width:"360px"},attrs:{label:e.name,prop:"buy_params"}},[1===e.type||4===e.type||6===e.type||21===e.type||22===e.type||23===e.type?a("el-input",{attrs:{placeholder:e.description},on:{input:function(a){return t.inputValue(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),2===e.type?a("el-input",{attrs:{type:"textarea",rows:2,placeholder:e.description},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),3===e.type?a("el-select",{staticStyle:{width:"360px"},attrs:{placeholder:e.description},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.type_config.split(","),(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):t._e(),5===e.type?a("el-select",{staticStyle:{width:"360px"},attrs:{multiple:"",placeholder:e.description},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.type_config.split(","),(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):t._e(),7===e.type?a("el-input",{attrs:{placeholder:e.description},on:{input:t.lcchange},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),8===e.type?a("el-select",{staticStyle:{width:"360px"},attrs:{placeholder:e.description},on:{change:t.lcchange},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.type_config.split(","),(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):t._e(),9===e.type?a("el-switch",{model:{value:e.is_default,callback:function(a){t.$set(e,"is_default",a)},expression:"item.is_default"}}):t._e(),61===e.type||62===e.type?a("el-input",{attrs:{placeholder:e.description},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[a("template",{slot:"append"},[a("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(a){return t.extract(e)}}},[t._v("提取")])])],2):t._e(),63===e.type?a("div",[a("el-input",{attrs:{placeholder:e.description,disabled:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[a("template",{slot:"append"},[a("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(a){return t.getqqData(t.dataList.buy_params[0].value,e)}}},[t._v("获取")])])],2),t.qqData.length?a("div",{staticStyle:{"margin-top":"15px"}},[a("el-button",{staticStyle:{padding:"12px 10px",transform:"translate(2px)"},attrs:{icon:"el-icon-arrow-left",plain:""},on:{click:function(a){return t.pageMin(t.dataList.buy_params[0].value,e)}}}),a("el-select",{staticStyle:{width:"288px"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(t.qqData,(function(t,e){return a("el-option",{key:e,attrs:{label:t.val,value:t.id}})})),1),a("el-button",{staticStyle:{padding:"12px 10px",transform:"translate(-2px)"},attrs:{icon:"el-icon-arrow-right",plain:""},on:{click:function(a){t.form1.page++,t.getqqData(t.dataList.buy_params[0].value,e)}}})],1):t._e()],1):t._e()],1)})),a("el-form-item",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.buttonLding},on:{click:function(e){return t.pay("ruleForm")}}},[t._v(" "+t._s(t.lottery_record_id?"立即兑换":"立即购买 ¥"+(this.dataList.price*this.ruleForm.buy_number*t.lcnum).toFixed(6))+" ")]),a("span",{staticStyle:{"padding-left":"10px",cursor:"pointer"},on:{click:function(e){return t.collection(t.dataList.is_collect)}}},[a("i",{staticClass:"el-icon-star-on",staticStyle:{"font-size":"26px",transform:"translate(0, 3px)"},style:{color:t.is_collect?t.theme_color:"#ccc"}}),a("span",{staticStyle:{color:"#96A1BA"}},[t._v(t._s(t.is_collect?"取消收藏":"收藏"))])])],1)],2)],1):t._e(),"multiple"===t.activeStatus?a("div",[a("div",{staticStyle:{color:"#666","font-size":"17px"}},[t.dataList.buy_rate&&1!==t.dataList.buy_rate?a("div",{staticStyle:{color:"#F8393E"}},[t._v(" 注：购买数量必须是"+t._s(t.dataList.buy_rate)+"的整数倍 ")]):t._e(),a("div",[t._v(" 批量下单格式为  购买数量"),t._l(t.dataList.buy_params,(function(e){return a("span",{key:e.id,staticStyle:{padding:"10px 0"}},[a("span",{staticStyle:{display:"inline-block"}},[t._v("----"+t._s(e.name))])])})),t._v("  "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(" 1. 必须满足格式要求,否则无法下单成功 ")]),a("div",[t._v(" 2. 必须一行一条数据, 否则无法下单成功 ")]),a("div",[t._v(" 3. 批量下单,依然要满足下单基数需求 ")])]),a("i",{staticClass:"el-icon-info",staticStyle:{color:"black"}})])],2)]),a("div",{staticStyle:{"margin-top":"10px",width:"80%"}},[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"一行一条数据"},model:{value:t.textareaList,callback:function(e){t.textareaList=e},expression:"textareaList"}})],1),a("el-form-item",{staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.buttonLding},on:{click:t.bulkOrder}},[t._v(" 批量下单 ")]),a("span",{staticStyle:{"padding-left":"10px",cursor:"pointer"},on:{click:function(e){return t.collection(t.dataList.is_collect)}}},[a("i",{staticClass:"el-icon-star-on",staticStyle:{"font-size":"26px",transform:"translate(0, 3px)"},style:{color:t.is_collect?t.theme_color:"#ccc"}}),a("span",{staticStyle:{color:"#96A1BA"}},[t._v(t._s(t.is_collect?"取消收藏":"收藏"))])])],1)],1)],1)]):t._e()])])],1)],1)]),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"商品详情",name:"first"}},[a("div",[a("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},[t._v(" 商品详情 ")])],1),a("div",{staticStyle:{"margin-top":"35px","min-height":"300px"},domProps:{innerHTML:t._s(t.dataList.particulars)}})]),a("el-tab-pane",{attrs:{label:"历史订单",name:"second"}},[a("el-form",{ref:"form",attrs:{model:t.form,size:"small ",inline:"true"}},[a("el-form-item",[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"已付款",value:1}}),a("el-option",{attrs:{label:"待处理",value:2}}),a("el-option",{attrs:{label:"处理中",value:3}}),a("el-option",{attrs:{label:"补单中",value:4}}),a("el-option",{attrs:{label:"退单中",value:5}}),a("el-option",{attrs:{label:"已完成",value:6}}),a("el-option",{attrs:{label:"已退单",value:7}}),a("el-option",{attrs:{label:"已退款",value:8}}),a("el-option",{attrs:{label:"有异常",value:9}})],1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"下单参数",clearable:""},model:{value:t.form.buy_params,callback:function(e){t.$set(t.form,"buy_params",e)},expression:"form.buy_params"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"订单编号",clearable:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",t._n(e))},expression:"form.id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getData}},[t._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",stripe:"","tooltip-effect":"light",data:t.tableData,"header-cell-style":{background:t.theme_rgba,color:"#363636"}}},[a("el-table-column",{attrs:{label:"订单状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini",type:"success"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),2===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#816bff",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),3===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#15559a",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),4===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#1677b3",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),5===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#e4bf11",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),6===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),7===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#333333",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),8===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#5c2223",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),9===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e()]}}],null,!1,1267095258)}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"id",label:"编号",align:"center"}}),a("el-table-column",{attrs:{label:"商品名称",align:"center","show-overflow-tooltip":"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#40a9ff",cursor:"pointer"}},[t._v(t._s(e.row.goods_name))])]}}],null,!1,293708328)}),a("el-table-column",{attrs:{label:"下单参数",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.buy_params.length?a("span",[a("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[t._l(e.row.buy_params,(function(e,s){return a("div",{key:s},[!1===e.is_default?a("div",[t._v(" "+t._s(e.name)+": "+t._s(e.value)+" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+e.value,expression:"`${item.value}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text"}},[t._v("复制")])],1):t._e()])})),a("div",{staticStyle:{"white-space":"nowrap",color:"#409EFF",cursor:"pointer"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(t.paramsFiltra(e.row.buy_params)))])],2)],1):a("span",[t._v("-")])]}}],null,!1,2794378060)}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"start_num",label:"开始",align:"center",width:"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"current_num",label:"当前",align:"center",width:"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"buy_number",label:"下单数量",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"下单金额",align:"center",width:"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#F56C6C",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(parseFloat(e.row.amount).toFixed(6))+" "),e.row.refund_amount?a("span",[t._v("(已退: "+t._s(e.row.refund_amount.toFixed(6))+")")]):t._e()])]}}],null,!1,219629215)}),a("el-table-column",{attrs:{label:"下单时间",align:"center",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTimer")(e.row.create_time))+" ")]}}],null,!1,2622578286)}),a("el-table-column",{attrs:{label:"备注",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.remark)+" ")]}}],null,!1,363227647)}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"140",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.row.status_changes,(function(e,s){return a("div",{key:s},[t._v(" "+t._s(t._f("formatTimer")(e.At))+" "+t._s(e.Name)+" ")])})),0),a("el-button",{attrs:{type:"text"}},[t._v(" 状态 ")])],1),e.row.goods_refund_status&&e.row.goods_refund_status.includes(e.row.status)?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.isReturn(e.row.id)}}},[t._v(" 退单 ")]):t._e(),1===e.row.is_card_code?a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.cardCodeIds=e.row.card_code_ids,t.dialogVisible1=!0}},slot:"reference"},[t._v(" 卡密 ")]):t._e()]}}],null,!1,1741105271)})],1),10<t.total?a("pagination",{attrs:{total:t.total,page:t.form.page,limit:t.form.list_rows,"page-sizes":[10,20,50,100]},on:{"update:page":function(e){return t.$set(t.form,"page",e)},"update:limit":function(e){return t.$set(t.form,"list_rows",e)},pagination:t.pagination}}):t._e()],1)],1)],1)],1):a("div",[a("div",{staticStyle:{height:"calc(100vh - 120px)",margin:"auto",width:"1300px","background-color":"#fff"}},[a("el-empty",{attrs:{description:"该商品已删除"}})],1)]),a("popup",{attrs:{"dialog-title":t.dialogTitle,visible:t.dialogVisible,"popup-width":"500px"},on:{"update:visible":function(e){t.dialogVisible=e},resetPopupData:t.resetPopupData,submitPopupData:t.submitPopupData,handleClose:t.resetPopupData}},[a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"请仔细检查下单参数, 再进行操作!",type:"warning","show-icon":"",closable:!1}}),a("el-form",[a("el-input",{attrs:{type:"textarea",rows:6,disabled:""},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("span",{staticStyle:{"margin-right":"5px","font-size":"15px"}},[t._v("总价:")]),a("span",{staticStyle:{color:"#ee0a24","font-size":"20px"}},[t._v("¥"+t._s(t.combination)+"元")])])],1)]),a("popup",{attrs:{"dialog-title":"卡密",visible:t.cardShow,"popup-width":"500px"},on:{"update:visible":function(e){t.cardShow=e},resetPopupData:function(e){t.cardShow=!1},submitPopupData:function(e){t.cardShow=!1},handleClose:function(e){t.cardShow=!1}}},[a("div",[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"关闭此页面,也可到订单页面查看卡密!",type:"warning","show-icon":"",closable:!1}}),a("div",{staticStyle:{"max-height":"400px",overflow:"auto","padding-right":"10px"}},t._l(this.card_code_ids,(function(e,s){return a("div",{key:s,staticStyle:{color:"#999","line-height":"24px",display:"flex","justify-content":"space-between"}},[a("div",[t._v(t._s(e))]),a("div",[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"item",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"padding-left":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(" 复制 ")])],1)])})),0),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.card_code_ids.join("\n"),expression:"card_code_ids.join('\\n')",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"margin-top":"20px","margin-left":"50%",transform:"translate(-50%)"},attrs:{size:"mini",type:"primary"}},[t._v(" 复制全部 ")])],1)],1)]),a("popup",{attrs:{"dialog-title":"卡密信息",visible:t.dialogVisible1,"popup-width":"550px"},on:{"update:visible":function(e){t.dialogVisible1=e},resetPopupData:function(e){t.dialogVisible1=!1},submitPopupData:function(e){t.dialogVisible1=!1},handleClose:function(e){t.dialogVisible1=!1}}},[a("div",{staticStyle:{"max-height":"800px",overflow:"auto","padding-right":"10px"}},t._l(t.cardCodeIds,(function(e,s){return a("div",{key:s,staticStyle:{color:"#999","line-height":"24px",display:"flex","justify-content":"space-between"}},[a("div",[t._v(t._s(e)+" ")]),a("div",[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"item",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"padding-left":"100px",cursor:"pointer"},style:{color:t.theme_color},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("复制")])])])})),0),a("div",[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.cardCodeIds.join("\n"),expression:"cardCodeIds.join('\\n')",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"margin-top":"20px"},attrs:{type:"text"}},[t._v(" 复制全部 ")])],1)]),a("service")],1)}),[],!1,null,null,null);e.default=i.exports},"31d6":function(t,e){t.exports="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAIQAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAFA4PEg8NFBIQEhcVFBgeMiEeHBwePSwuJDJJQExLR0BGRVBac2JQVW1WRUZkiGVtd3uBgoFOYI2XjH2Wc36BfP/bAEMBFRcXHhoeOyEhO3xTRlN8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fP/AABEIAWwBbAMBIgACEQEDEQH/xAAaAAEBAQEBAQEAAAAAAAAAAAAAAQIDBAUG/8QAMBABAQACAgAEBAUEAgMBAAAAAAECEQNREiExcQQUMkEiNFJTYQUTM4GCkSNCkrH/xAAYAQEBAQEBAAAAAAAAAAAAAAAAAQIDBP/EAB8RAQEAAgMAAwEBAAAAAAAAAAABAhESMVEDMkEhYf/aAAwDAQACEQMRAD8A/Y5ZTCbrhlyZZffU/g5cvFneow6YxnYA0AAAAgAAAAAAAAAACggoCCgIKAgoCCgI6ceWvKsBZsdxjDLc1fVtzUAAAAAAAANgK1jdtMYtpVeMB1YAABQEFAQUAAAAAAAAAAAAAAAAAAEAAAAJ5XbtjfFHFccvDUsV2AYUAAAAAAABY0zGkV5QHVkAAAAAAAAAEAAAAAAAAAAAAAABQEC3SboKEqggoDfHl9m3GeVdpdxixqCgigAgAAABGmY0ivKA6sAAAAAAAAAAAKCCgIKAAIAAAAAAAAM00ujSiaF0aAipo0grWF+zJPIHcTGqw2AAAAAAsVIqDyijqwgoCKCAAAAAAAAAAACggoCCgqKAAAAAAAAAAAAANYX7OjlPKukZqxQEUAAABYqKg8wDowAAAAAACgIKAiW9LWQN03ewUWZdtMLLpBoTxNCgCAAAAAAAAAAAAAAA3jfJhrAqtgMKAAAoKADzCjowgoAAAAKCgIbDQJTSgJo0oCaNKAmlnkALsRUAUFQUBFAEFARQAAAAAJ6gDpBIrCgACxFgKADzijoygogAAAACgIAAKAgoCCgqCgIKAAAAAAAAAAAAlykuqCgIAAN4tMYtpVAEBUUAAHABtkFARQAAAAFAABMsscJvKyTuuXzfB+5Fkt6S2Tt2HH5vh/XD5vg/XDjl4nLH12HH5vg/XD5vg/XDjl4csfXYcfm+D9cPm+D9yHHLw5Y+uyuHzfB+5D5vg/chxy8OWPruOHzfB+5D5vg/chxy8OWPruOPzfB+uHzfB+uHHLw5Y+uw4/N8H7kPm+D9yHHLw5Y+uw4/N8H7kPm+D9yHHLw5Y+uw4/N8H7kPm+D9yHHLw5Y+uzlyTfLiuHxHFyXWOctXw/8Ak8X20ddnfTVsiuc/Hnv7T0dEUARVnq1GZ6tRKKAikUAAAcQG0AAAABRBBQAAHg+Jn974rwZfRhN67rUxxnpJ/wBGf5vl9orv+SOM/amp1P8Ao1OoJbJ63QpqdQ1OokyxvpZVA1Oomp1FRUNTqGp1ABNTqGp1AA1Oomp1FRUNTqGp1ABNTqGp1AUNTqJqdRUEPKX0e74fkueHn6x4Xr+D+jL3Y+SfxvDt1y8e9Yya7TwZX6snUcdumkk1BRFGoy1EqqCoAAAAOIo0gAAAAAAAAADw5/m+X2ipyfm+X2g7uMZzys1MZvLLykax4ccfPP8AHl3Wcf8ANbftj5NZZL/kP9q5TH9MZlkumMs3O5+cWRm5O4IjQAAIKgIAAiioAgIKD2fBfRl7vG9nwX0Ze7HyfVrDt6QHndgABqMtRFVUVAAAAByAaQAAAABQQUAAB4OT83y+0Dl/N8ntEej8jizl5Zb/AI1WMs3Vyz4pl6XTU1+s2X8css0498nJJ9p6t/LW3zy8v4dcMJhjrGNWyT+MTG2/1oEYdQEEVAUBAAEEVEyymPv9oY8dy8+T/wCVTZuX0o34ceozZoEe34H6Mvd4nt+B+jL3Y+T6t4dvSKPM7IKAGNEwB0ARQAAAHIUaQAAAABnLPHD6rIDQ5483Hl6ZR0OjYAg+fzfm+T2gc35vk9oj0/kcQBQRMspjPOrjxZ8nnl+DHr70Rm5bvhxlyvUa8PJ98P8Aqu+GGPHNYzS7Z5eLx9eYds8Jl/F7cssbj6+c7al2lmkQFQQLdTzUGblbfDhN3/8AEni5PTyx77dccZhNYw6TtMMJj53zy7XZalqdnRamXpEtL9MUR7fgPoy93he74D6Mvdj5Pq1h9nrAeZ3AAL6VMFy9KYH4NgMtACoAA5gNIAAAIMcvJOLjuVfNyzueW8ruvd8ZhlnxTw+erux8/wBLqvR8cmtuWd/rUez4Tltvgyvs8UaxyuNlnlY1lNxmXVfVHjnxeXh1ZN9u/wAPyXkxty9ZXC42du0ylePm/N8ntEXn/N8ntGXadRxLderOPi5Lrjnl+q+izD+5y4436Z53+Xq9JqFuiTbnx8OOHnfxZd10TabY/tb6XabTabBdptNpa1pGcsJfOeVc7+H18nXaVqVmuNzk++71CYXLzz/1i6ak9JIlrW/GdeqlqWps0bW1m02zaumdrav/AKxi1Z9KkV7vgPoy93ge/wDp/wBGXu5/J9XTD7PWA8ruKArOXo1gzl9m8fQ/BQEAAAAHMUVEUAAAHzvjbLzak9J5vobk9a5T4fjuWWWU8VvbeFmN3Wcpv+PmxqLzTGcuXgn4dsx6e3FqO3Hz5cePhx04NRmzaypcssufkuXrqKlz8fPndfaRVSNcX+b/AIu+3n4v8v8AxdtsZdtTpdptNptNKu02m02uk2bTZtnbWk2u0tS1LV0ztbWbTbNq6Ta7S1LUta0ztbWbUtS1dJtbWsfpcrW+O/hWwl/rb3/0/wCjL3fPe/8Ap30Ze7j8n1dcPs9gK8r0gAM36o3PRieeVdCgAgAAAAwAqAACZXWNqpnPwUHnttvmszsmtpqo6uZqa1qOHLxa/Fj/ALjuLLos28cWOufBu7xuv4Z/tZz7Om4xquOP+bP2jbElnNnL66jbVZi8f+X/AIuu3HG6yl/06sVqG02JQNpaebNVF2lqeaebSG02XbN2rK2s2l30zd9LpFtZtLtm76a0ztbWbS7Zu+mtM7W104r+H/bjJbdSO+GPhx0mS49tPd/T8tYZe7wPb8D9OXu4/J9XbD7PdMpWnJZbHl09O3Q9GZl2uX0+6KmDozjGkoAAAAAAwCqIKAAlugLJquUwm2/UWI5ck15xh6LNzzYvHGpWbHIdpxxfBOl5GnzOT8zye0Hr+I+H3fHhPPWrO3l8OXVdscpY5WWIbvZ4b1Tw3qtIeK908V7p4b1U8N6ohu9m72eHLqnhy6oJu9m72eG9U8OXVUN3tN1fDeqnhy6ohtNr4b1Tw5dVRNh4cuqeHLqiIL4cuqnhy6oIL4cuq7cXFJN5TzLdEm3KYZX0xr1/By445TKa81i+LTllluadMcdXb0SVrTljy9x1llm44WWO0ob81SeqK6Y1pzal7RWgEAAAAGQFAAEt0gCACgCggogiaaAZ1OjU6aFGdTqGp1GgGdTqGp1GgGdTqGp1FATU6hqdRUA1OoanUADU6ianUUBNTqGp1FASzcsmnn/s579HpGplpLNvNeLKY26YmN6r2C804vNMMunbjxs9WxLltZNJfRZ6HrVZVBQCWtbZWINbVgRWxna7BAFBKqAAAAACgIKAgoCCgIKAgACKAgCogAAAAAAACgAipegJFFBBRBBQAAAAFARQAAAAAAFBBQEFAQVAAAEBQRUAAVBFAQVAAAFAABAMe0vTSgAgAAACgAgACgIoAACgAAAAAAAAgACAoAggAAAoAgAAAKAAACetQXGfdQAAAAAAAAAABQEUBQAAAAAAAAEABAUABEAAAUAQAAAABUUABAqyaiSfeqAAAAAAAAACAogDQKiooAAAAAAAIqAIqKAAgioAAoAgAAAAAAKAAa2VfsgAAAAAAAAAgAAACj//2Q=="},"4cb2e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAACaBAMAAACj0UwkAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAPUExURf/48P5xD//o1P/Clf6PQlB3EHsAAAHbSURBVGje7dhtsoIgFAZgwhZwSRZABxdQ6ga09r+mK6Yofo2cw0w/Ou+/anwGeYEsITgcDofD4XA4tGRVSq2qHj+ipZ039D39iJZVKdtzmvmRFiwfcZyvxb7LdFihlGpTYbVyeSWx5FN9ohOcKrJRYzT5yMsmrAuxC6vCvKhlhskNscww2MnzZS64kljmIi21TGoXz31M6QR1ktbJPtfStwGp02u3TDdbdevN5pHaxR0ZGyvO7YU6uobLZxT1ev5lrTBaf2QUK6xRSM1dPe+iHV/iNPUyE9fPP275Xqbje+hiPo1YzSNuxdSKoGl/fFs//3jtZn2TENYxatnjvPY3Cl0X4TcERrv5u8tFphJoQ6F6amWudb8DqvOdtiO3o1lbQdxeEPd9LepOP1xCrVu0R5o0sXuhOdCid5ZSrLH2ZS1PqsU+11yPtPgnrmJfwzzmF3taLgSNm2s4bP41peFOxQRMnNc0AObXDLjY5dh0/3YsCENsE2h6fD/Gk/6igRs0XU4fQOzAZlyvBdjZ4UkI0wxjW2AnRwew4py2wk5xcnURPDttA0NqUILdwAB1p3sxSTUhEnImfvVSR3ZueMidmsI6AiX+Pyk5n0NjUv55zuFwOBwOh8PhcLr8A9ryrQKH1obgAAAAAElFTkSuQmCC"},"56b5":function(t,e,a){var s={"./blue/default.png":"31d6","./yellow/default.png":"4cb2e"};function o(t){return t=i(t),a(t)}function i(t){if(a.o(s,t))return s[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}o.keys=function(){return Object.keys(s)},o.resolve=i,(t.exports=o).id="56b5"},"5b36":function(t,e,a){"use strict";a.r(e),a("4160"),a("159b");var s={name:"Order",data:function(){return{total:0,tableData:[],loading:!0,form:{page:1,list_rows:10,status:0,id:null,goods_id:null,goods_name:"",buy_params:""},dialogVisible1:!1,card_code_ids:[],theme_rgba:localStorage.getItem("theme_rgba"),theme_color:localStorage.getItem("theme_color")}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.form.id?this.form.id=parseInt(this.form.id):this.form.id=null,this.$http.orderPaging(this.form).then((function(e){0===e.code?(t.total=e.data.count,t.tableData=e.data.infos,t.loading=!1):t.$message({message:e.message,type:"error"})}))},pagination:function(t){this.form.page=t.page,this.form.list_rows=t.limit,this.getData()},isStatus:function(t){return 1===t?"已付款":2===t?"待处理":3===t?"处理中":4===t?"补单中":5===t?"退单中":6===t?"已完成":7===t?"已退单":8===t?"已退款":9===t?"有异常":void 0},isReturn:function(t){var e=this;this.$confirm("是否确认退单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.statusHandle({status:5,id:t}).then((function(t){0===t.code?(e.$message({message:"申请退单成功，请耐心等待系统处理。",type:"success"}),e.getData()):e.$message.error(t.message)}))}))},onCopy:function(){this.$message({message:"复制成功",type:"success"})},paramsFiltra:function(t){var e=[];return t.forEach((function(t){!1===t.is_default&&e.push(t)})),e[0].value}}};a=a("2877"),a=Object(a.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("el-form",{ref:"form",attrs:{model:t.form,inline:!0}},[a("el-form-item",[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"已付款",value:1}}),a("el-option",{attrs:{label:"待处理",value:2}}),a("el-option",{attrs:{label:"处理中",value:3}}),a("el-option",{attrs:{label:"补单中",value:4}}),a("el-option",{attrs:{label:"退单中",value:5}}),a("el-option",{attrs:{label:"已完成",value:6}}),a("el-option",{attrs:{label:"已退单",value:7}}),a("el-option",{attrs:{label:"已退款",value:8}}),a("el-option",{attrs:{label:"有异常",value:9}})],1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"下单参数",clearable:""},model:{value:t.form.buy_params,callback:function(e){t.$set(t.form,"buy_params",e)},expression:"form.buy_params"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"商品名称",clearable:""},model:{value:t.form.goods_name,callback:function(e){t.$set(t.form,"goods_name",e)},expression:"form.goods_name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"订单编号",clearable:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getData}},[t._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",stripe:"","tooltip-effect":"light",data:t.tableData,"header-cell-style":{background:t.theme_rgba,color:"#363636"}}},[a("el-table-column",{attrs:{label:"订单状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini",type:"success"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),2===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#816bff",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),3===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#15559a",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),4===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#1677b3",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),5===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#e4bf11",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),6===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),7===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#333333",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),8===e.row.status?a("el-tag",{attrs:{effect:"dark",color:"#5c2223",size:"mini",type:"info"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e(),9===e.row.status?a("el-tag",{attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(" "+t._s(t.isStatus(e.row.status))+" ")]):t._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"id",label:"编号",align:"center"}}),a("el-table-column",{attrs:{label:"商品名称",align:"center","show-overflow-tooltip":"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#40a9ff",cursor:"pointer"},on:{click:function(a){return t.$router.push({path:"/details",query:{id:e.row.goods_id}})}}},[t._v(t._s(e.row.goods_name))])]}}])}),a("el-table-column",{attrs:{label:"下单参数",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.buy_params.length?a("span",[a("el-popover",{attrs:{placement:"top-start",trigger:"hover"}},[t._l(e.row.buy_params,(function(e,s){return a("div",{key:s},[!1===e.is_default?a("div",[t._v(" "+t._s(e.name)+": "+t._s(e.value)+" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:""+e.value,expression:"`${item.value}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text"}},[t._v("复制")])],1):t._e()])})),a("div",{staticStyle:{"white-space":"nowrap",color:"#409EFF",cursor:"pointer"},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(t.paramsFiltra(e.row.buy_params)))])],2)],1):a("span",[t._v("-")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"start_num",label:"开始",align:"center",width:"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"current_num",label:"当前",align:"center",width:"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",property:"buy_number",label:"下单数量",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"下单金额",align:"center",width:"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#F56C6C",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(parseFloat(e.row.amount).toFixed(6))+" "),e.row.refund_amount?a("span",[t._v("(已退: "+t._s(e.row.refund_amount.toFixed(6))+")")]):t._e()])]}}])}),a("el-table-column",{attrs:{label:"下单时间",align:"center",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTimer")(e.row.create_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.remark)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"140",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.row.status_changes,(function(e,s){return a("div",{key:s},[t._v(" "+t._s(t._f("formatTimer")(e.At))+" "+t._s(e.Name)+" ")])})),0),a("el-button",{attrs:{type:"text"}},[t._v(" 状态 ")])],1),e.row.goods_refund_status&&e.row.goods_refund_status.includes(e.row.status)?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.isReturn(e.row.id)}}},[t._v(" 退单 ")]):t._e(),1===e.row.is_card_code?a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.card_code_ids=e.row.card_code_ids,t.dialogVisible1=!0}},slot:"reference"},[t._v(" 卡密 ")]):t._e()]}}])})],1),10<t.total?a("pagination",{attrs:{total:t.total,page:t.form.page,limit:t.form.list_rows,"page-sizes":[10,20,50,100]},on:{"update:page":function(e){return t.$set(t.form,"page",e)},"update:limit":function(e){return t.$set(t.form,"list_rows",e)},pagination:t.pagination}}):t._e(),a("popup",{attrs:{"dialog-title":"卡密信息",visible:t.dialogVisible1,"popup-width":"550px"},on:{"update:visible":function(e){t.dialogVisible1=e},resetPopupData:function(e){t.dialogVisible1=!1},submitPopupData:function(e){t.dialogVisible1=!1},handleClose:function(e){t.dialogVisible1=!1}}},[a("div",{staticStyle:{"max-height":"800px",overflow:"auto","padding-right":"10px"}},t._l(t.card_code_ids,(function(e,s){return a("div",{key:s,staticStyle:{color:"#999","line-height":"24px",display:"flex","justify-content":"space-between"}},[a("div",[t._v(t._s(e)+" ")]),a("div",[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"item",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"padding-left":"100px",cursor:"pointer"},style:{color:t.theme_color},attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("复制")])])])})),0),a("div",[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.card_code_ids.join("\n"),expression:"card_code_ids.join('\\n')",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticStyle:{"margin-top":"20px"},attrs:{type:"text"}},[t._v(" 复制全部 ")])],1)])],1)}),[],!1,null,null,null);e.default=a.exports},d31f:function(t,e,a){},ddd6:function(t,e,a){"use strict";var s=a("d31f");a.n(s).a}}]);